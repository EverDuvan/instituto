# Generated by Django 5.0.11 on 2025-05-29 19:36

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='ConceptoCobro',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo', models.CharField(max_length=20, unique=True)),
                ('nombre', models.CharField(max_length=100)),
                ('tipo', models.CharField(choices=[('matricula', 'Matrícula'), ('pension', 'Pensión'), ('materiales', 'Materiales'), ('certificado', 'Certificados'), ('otros', 'Otros')], max_length=20)),
                ('valor', models.DecimalField(decimal_places=2, max_digits=10)),
                ('aplica_iva', models.BooleanField(default=False)),
                ('aplica_descuento', models.BooleanField(default=False)),
                ('activo', models.BooleanField(default=True)),
                ('descripcion', models.TextField(blank=True, null=True)),
            ],
            options={
                'verbose_name_plural': 'Conceptos de Cobro',
                'ordering': ['tipo', 'nombre'],
            },
        ),
        migrations.CreateModel(
            name='ConfiguracionInstituto',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre_instituto', models.CharField(max_length=200)),
                ('logo', models.ImageField(upload_to='configuracion/')),
                ('nit', models.CharField(max_length=20)),
                ('direccion', models.TextField()),
                ('telefono_principal', models.CharField(max_length=20)),
                ('telefonos_secundarios', models.CharField(blank=True, max_length=100)),
                ('correo_principal', models.EmailField(max_length=254)),
                ('correos_secundarios', models.CharField(blank=True, max_length=200)),
                ('resolucion_autorizacion', models.CharField(max_length=100)),
                ('terminos_condiciones', models.TextField()),
                ('politica_privacidad', models.TextField()),
                ('porcentaje_descuento_maximo', models.DecimalField(decimal_places=2, default=10.0, max_digits=5)),
                ('iva', models.DecimalField(decimal_places=2, default=19.0, max_digits=5)),
            ],
        ),
        migrations.CreateModel(
            name='Consecutivo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo', models.CharField(choices=[('cobros', 'Recibos de Cobro'), ('egresos', 'Comprobantes de Egreso'), ('facturas', 'Facturas'), ('matriculas', 'Matrículas')], max_length=20, unique=True)),
                ('ultimo_numero', models.PositiveIntegerField(default=0)),
                ('prefijo', models.CharField(blank=True, max_length=10, null=True)),
                ('formato', models.CharField(default='{prefijo}{numero:04d}', max_length=50)),
                ('reiniciar_anual', models.BooleanField(default=True)),
            ],
        ),
        migrations.CreateModel(
            name='PeriodoAcademico',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=50)),
                ('fecha_inicio', models.DateField()),
                ('fecha_fin', models.DateField()),
                ('activo', models.BooleanField(default=True)),
                ('matricula_abierta', models.BooleanField(default=False)),
            ],
        ),
        migrations.CreateModel(
            name='Programa',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo', models.CharField(max_length=20, unique=True)),
                ('nombre', models.CharField(max_length=100)),
                ('area', models.CharField(choices=[('ciencias', 'Ciencias'), ('humanidades', 'Humanidades'), ('tecnologia', 'Tecnología'), ('artes', 'Artes'), ('idiomas', 'Idiomas')], max_length=20)),
                ('descripcion', models.TextField()),
                ('duracion_meses', models.PositiveIntegerField()),
                ('horas_totales', models.PositiveIntegerField()),
                ('costo_total', models.DecimalField(decimal_places=2, max_digits=12)),
                ('activo', models.BooleanField(default=True)),
                ('requisitos_ingreso', models.TextField()),
                ('certificado_otorga', models.CharField(max_length=100)),
                ('imagen', models.ImageField(blank=True, null=True, upload_to='programas/')),
            ],
            options={
                'verbose_name_plural': 'Programas',
                'ordering': ['area', 'nombre'],
            },
        ),
        migrations.CreateModel(
            name='Auditoria',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo', models.CharField(choices=[('creacion', 'Creación'), ('modificacion', 'Modificación'), ('eliminacion', 'Eliminación'), ('login', 'Inicio de Sesión'), ('logout', 'Cierre de Sesión'), ('otro', 'Otro')], max_length=20)),
                ('modelo', models.CharField(max_length=100)),
                ('objeto_id', models.PositiveIntegerField(blank=True, null=True)),
                ('descripcion', models.TextField()),
                ('fecha', models.DateTimeField(auto_now_add=True)),
                ('ip', models.GenericIPAddressField()),
                ('datos_anteriores', models.JSONField(blank=True, null=True)),
                ('datos_nuevos', models.JSONField(blank=True, null=True)),
                ('usuario', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='auditorias_realizadas', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name_plural': 'Registros de Auditoría',
                'ordering': ['-fecha'],
            },
        ),
        migrations.CreateModel(
            name='Backup',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('fecha', models.DateTimeField(auto_now_add=True)),
                ('descripcion', models.CharField(max_length=255)),
                ('archivo', models.FileField(upload_to='backups/')),
                ('tipo', models.CharField(choices=[('completo', 'Completo'), ('parcial', 'Parcial'), ('automatico', 'Automático')], max_length=20)),
                ('realizado_por', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='backups_realizados', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name_plural': 'Copias de Seguridad',
                'ordering': ['-fecha'],
            },
        ),
        migrations.CreateModel(
            name='Cobro',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('consecutivo', models.CharField(editable=False, max_length=20, unique=True)),
                ('fecha', models.DateField()),
                ('estado', models.CharField(choices=[('pendiente', 'Pendiente'), ('parcial', 'Parcial'), ('completo', 'Completo'), ('anulado', 'Anulado')], default='pendiente', max_length=20)),
                ('valor_total', models.DecimalField(decimal_places=2, max_digits=12)),
                ('saldo', models.DecimalField(decimal_places=2, max_digits=12)),
                ('tipo_ingreso', models.CharField(choices=[('matricula', 'Matrícula'), ('pension', 'Pensión'), ('material', 'Material'), ('certificado', 'Certificado'), ('otros', 'Otros')], default='pension', max_length=20)),
                ('observaciones', models.TextField(blank=True, null=True)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('creado_por', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='cobros_creados', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name_plural': 'Recibos de Cobro',
                'ordering': ['-fecha'],
            },
        ),
        migrations.CreateModel(
            name='ConfiguracionReporte',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=100)),
                ('tipo_reporte', models.CharField(choices=[('diario', 'Diario'), ('semanal', 'Semanal'), ('mensual', 'Mensual'), ('trimestral', 'Trimestral'), ('anual', 'Anual'), ('personalizado', 'Personalizado')], max_length=20)),
                ('formato_salida', models.CharField(choices=[('pdf', 'PDF'), ('excel', 'Excel'), ('html', 'HTML'), ('ambos', 'PDF y Excel')], default='pdf', max_length=20)),
                ('incluir_desglose', models.BooleanField(default=True)),
                ('incluir_graficas', models.BooleanField(default=True)),
                ('agrupar_por', models.CharField(choices=[('dia', 'Día'), ('semana', 'Semana'), ('mes', 'Mes'), ('tipo', 'Tipo de Movimiento'), ('categoria', 'Categoría'), ('metodo_pago', 'Método de Pago')], default='tipo', max_length=50)),
                ('parametros_personalizados', models.JSONField(default=dict)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('creado_por', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='config_reportes_creados', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Configuración de Reporte',
                'verbose_name_plural': 'Configuraciones de Reporte',
            },
        ),
        migrations.CreateModel(
            name='Curso',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo', models.CharField(max_length=20)),
                ('nombre', models.CharField(max_length=100)),
                ('descripcion', models.TextField()),
                ('horas', models.PositiveIntegerField()),
                ('orden', models.PositiveIntegerField()),
                ('costo', models.DecimalField(decimal_places=2, max_digits=10)),
                ('activo', models.BooleanField(default=True)),
                ('prerequisitos', models.ManyToManyField(blank=True, to='english.curso')),
                ('programa', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cursos', to='english.programa')),
            ],
            options={
                'ordering': ['programa', 'orden'],
                'unique_together': {('programa', 'codigo')},
            },
        ),
        migrations.CreateModel(
            name='DetallePago',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('metodo_pago', models.CharField(choices=[('efectivo', 'Efectivo'), ('transferencia', 'Transferencia'), ('cheque', 'Cheque'), ('tarjeta_credito', 'Tarjeta Crédito'), ('tarjeta_debito', 'Tarjeta Débito'), ('nequi', 'Nequi'), ('daviplata', 'Daviplata'), ('bancolombia', 'Bancolombia'), ('otro', 'Otro')], max_length=20)),
                ('valor', models.DecimalField(decimal_places=2, max_digits=12)),
                ('banco', models.CharField(blank=True, max_length=50, null=True)),
                ('numero_comprobante', models.CharField(blank=True, max_length=50, null=True)),
                ('fecha', models.DateField()),
                ('observaciones', models.TextField(blank=True, null=True)),
                ('fecha_registro', models.DateTimeField(auto_now_add=True)),
                ('cobro', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='pagos', to='english.cobro')),
                ('registrado_por', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='pagos_registrados', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name_plural': 'Detalles de Pago',
                'ordering': ['-fecha'],
            },
        ),
        migrations.CreateModel(
            name='Docente',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo_identificacion', models.CharField(choices=[('cc', 'Cédula de Ciudadanía'), ('ti', 'Tarjeta de Identidad'), ('ce', 'Cédula de Extranjería'), ('pasaporte', 'Pasaporte')], max_length=20)),
                ('identificacion', models.CharField(max_length=20, unique=True)),
                ('nombres', models.CharField(max_length=200)),
                ('apellidos', models.CharField(max_length=200)),
                ('fecha_nacimiento', models.DateField(blank=True, null=True)),
                ('genero', models.CharField(choices=[('masculino', 'Masculino'), ('femenino', 'Femenino'), ('otro', 'Otro'), ('no_indica', 'Prefiero no indicar')], max_length=20)),
                ('titulo_academico', models.CharField(max_length=100)),
                ('especialidad', models.CharField(max_length=100)),
                ('tipo_contrato', models.CharField(choices=[('planta', 'Planta'), ('contratista', 'Contratista'), ('ocasional', 'Ocasional'), ('catedra', 'Cátedra')], max_length=20)),
                ('fecha_vinculacion', models.DateField()),
                ('activo', models.BooleanField(default=True)),
                ('direccion', models.TextField()),
                ('telefono', models.CharField(max_length=20)),
                ('telefono_alterno', models.CharField(blank=True, max_length=20, null=True)),
                ('correo', models.EmailField(max_length=254)),
                ('correo_institucional', models.EmailField(blank=True, max_length=254, null=True)),
                ('hoja_vida', models.FileField(blank=True, null=True, upload_to='docentes/hojas_vida/')),
                ('foto', models.ImageField(blank=True, null=True, upload_to='docentes/fotos/')),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_actualizacion', models.DateTimeField(auto_now=True)),
                ('creado_por', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name_plural': 'Docentes',
                'ordering': ['apellidos', 'nombres'],
            },
        ),
        migrations.CreateModel(
            name='DocumentoInstitucional',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=200)),
                ('tipo', models.CharField(choices=[('manual', 'Manual'), ('reglamento', 'Reglamento'), ('informe', 'Informe'), ('contrato', 'Contrato'), ('otro', 'Otro')], max_length=20)),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('archivo', models.FileField(upload_to='documentos_institucionales/')),
                ('fecha_publicacion', models.DateField(auto_now_add=True)),
                ('fecha_actualizacion', models.DateField(auto_now=True)),
                ('publicado_por', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='documentos_publicados', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name_plural': 'Documentos Institucionales',
                'ordering': ['-fecha_publicacion'],
            },
        ),
        migrations.CreateModel(
            name='Egreso',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('consecutivo', models.CharField(editable=False, max_length=20, unique=True)),
                ('tipo', models.CharField(choices=[('nomina', 'Nómina'), ('arriendo', 'Arriendo'), ('servicios', 'Servicios Públicos'), ('materiales', 'Materiales'), ('equipos', 'Equipos'), ('mantenimiento', 'Mantenimiento'), ('otros', 'Otros Gastos')], max_length=20)),
                ('concepto', models.CharField(max_length=255)),
                ('beneficiario', models.CharField(max_length=255)),
                ('documento_soporte', models.CharField(max_length=50)),
                ('fecha', models.DateField()),
                ('valor_total', models.DecimalField(decimal_places=2, max_digits=12)),
                ('forma_pago', models.CharField(choices=[('efectivo', 'Efectivo'), ('transferencia', 'Transferencia'), ('cheque', 'Cheque'), ('tarjeta_credito', 'Tarjeta Crédito'), ('tarjeta_debito', 'Tarjeta Débito'), ('nequi', 'Nequi'), ('daviplata', 'Daviplata'), ('bancolombia', 'Bancolombia'), ('otro', 'Otro')], max_length=20)),
                ('categoria_detallada', models.CharField(choices=[('docente', 'Pago Docentes'), ('administrativo', 'Pago Administrativos'), ('arriendo_sede', 'Arriendo Sede'), ('servicios_publicos', 'Servicios Públicos'), ('material_oficina', 'Material de Oficina'), ('material_enseñanza', 'Material de Enseñanza'), ('equipos_computo', 'Equipos de Cómputo'), ('mantenimiento_edificio', 'Mantenimiento Edificio'), ('mantenimiento_equipos', 'Mantenimiento Equipos'), ('publicidad', 'Publicidad y Marketing'), ('capacitacion', 'Capacitación'), ('impuestos', 'Impuestos'), ('seguros', 'Seguros'), ('otros', 'Otros')], default='otros', max_length=100)),
                ('observaciones', models.TextField(blank=True, null=True)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('aprobado_por', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='egresos_aprobados', to=settings.AUTH_USER_MODEL)),
                ('creado_por', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='egresos_creados', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name_plural': 'Comprobantes de Egreso',
                'ordering': ['-fecha'],
            },
        ),
        migrations.CreateModel(
            name='DetalleEgreso',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('descripcion', models.CharField(max_length=255)),
                ('cantidad', models.PositiveIntegerField(default=1)),
                ('valor_unitario', models.DecimalField(decimal_places=2, max_digits=12)),
                ('valor_total', models.DecimalField(decimal_places=2, max_digits=12)),
                ('egreso', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='detalles', to='english.egreso')),
            ],
            options={
                'verbose_name_plural': 'Detalles de Egreso',
            },
        ),
        migrations.CreateModel(
            name='Estudiante',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo_identificacion', models.CharField(choices=[('cc', 'Cédula de Ciudadanía'), ('ti', 'Tarjeta de Identidad'), ('ce', 'Cédula de Extranjería'), ('pasaporte', 'Pasaporte')], max_length=20)),
                ('identificacion', models.CharField(max_length=20, unique=True)),
                ('primer_nombre', models.CharField(max_length=100)),
                ('segundo_nombre', models.CharField(blank=True, max_length=100, null=True)),
                ('primer_apellido', models.CharField(max_length=100)),
                ('segundo_apellido', models.CharField(blank=True, max_length=100, null=True)),
                ('fecha_nacimiento', models.DateField()),
                ('genero', models.CharField(choices=[('masculino', 'Masculino'), ('femenino', 'Femenino'), ('otro', 'Otro'), ('no_indica', 'Prefiero no indicar')], max_length=20)),
                ('lugar_nacimiento', models.CharField(blank=True, max_length=100, null=True)),
                ('direccion', models.TextField()),
                ('barrio', models.CharField(max_length=100)),
                ('ciudad', models.CharField(max_length=100)),
                ('departamento', models.CharField(max_length=100)),
                ('telefono_principal', models.CharField(max_length=20)),
                ('telefono_alterno', models.CharField(blank=True, max_length=20, null=True)),
                ('correo', models.EmailField(max_length=254)),
                ('estado', models.CharField(choices=[('activo', 'Activo'), ('inactivo', 'Inactivo'), ('graduado', 'Graduado'), ('retirado', 'Retirado'), ('suspendido', 'Suspendido')], default='activo', max_length=20)),
                ('fecha_ingreso', models.DateField()),
                ('eps', models.CharField(blank=True, max_length=100, null=True)),
                ('grupo_sanguineo', models.CharField(blank=True, max_length=10, null=True)),
                ('alergias', models.TextField(blank=True, null=True)),
                ('condiciones_especiales', models.TextField(blank=True, null=True)),
                ('foto', models.ImageField(blank=True, null=True, upload_to='estudiantes/fotos/')),
                ('contrato_firmado', models.BooleanField(default=False)),
                ('fecha_contrato', models.DateField(blank=True, null=True)),
                ('consentimiento_datos', models.BooleanField(default=False)),
                ('autorizacion_imagen', models.BooleanField(default=False)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_actualizacion', models.DateTimeField(auto_now=True)),
                ('creado_por', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name_plural': 'Estudiantes',
                'ordering': ['primer_apellido', 'primer_nombre'],
            },
        ),
        migrations.CreateModel(
            name='DocumentoEstudiante',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo', models.CharField(choices=[('identidad', 'Documento de Identidad'), ('registro', 'Registro Civil'), ('certificado', 'Certificado Estudios'), ('medico', 'Certificado Médico'), ('contrato', 'Contrato'), ('foto', 'Fotografía'), ('otros', 'Otros')], max_length=20)),
                ('archivo', models.FileField(upload_to='documentos/estudiantes/')),
                ('fecha_subida', models.DateTimeField(auto_now_add=True)),
                ('observaciones', models.TextField(blank=True, null=True)),
                ('subido_por', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='documentos_subidos', to=settings.AUTH_USER_MODEL)),
                ('estudiante', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='documentos', to='english.estudiante')),
            ],
            options={
                'verbose_name_plural': 'Documentos de Estudiantes',
                'ordering': ['estudiante', '-fecha_subida'],
            },
        ),
        migrations.CreateModel(
            name='Factura',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('consecutivo', models.CharField(editable=False, max_length=20, unique=True)),
                ('fecha_emision', models.DateField(auto_now_add=True)),
                ('fecha_vencimiento', models.DateField()),
                ('estado', models.CharField(choices=[('pendiente', 'Pendiente'), ('parcial', 'Parcialmente Pagada'), ('pagada', 'Pagada'), ('cancelada', 'Cancelada'), ('vencida', 'Vencida')], default='pendiente', max_length=20)),
                ('subtotal', models.DecimalField(decimal_places=2, max_digits=12)),
                ('descuento', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('iva', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total', models.DecimalField(decimal_places=2, max_digits=12)),
                ('saldo', models.DecimalField(decimal_places=2, max_digits=12)),
                ('observaciones', models.TextField(blank=True, null=True)),
                ('creada_por', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='facturas_creadas', to=settings.AUTH_USER_MODEL)),
                ('estudiante', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='english.estudiante')),
            ],
            options={
                'verbose_name_plural': 'Facturas',
                'ordering': ['-fecha_emision'],
            },
        ),
        migrations.AddField(
            model_name='cobro',
            name='factura',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='cobros', to='english.factura'),
        ),
        migrations.CreateModel(
            name='Grupo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo', models.CharField(max_length=20)),
                ('jornada', models.CharField(choices=[('mañana', 'Mañana (7:00-12:00)'), ('tarde', 'Tarde (13:00-18:00)'), ('noche', 'Noche (18:00-22:00)'), ('sabados', 'Sábados (8:00-13:00)'), ('virtual', 'Virtual'), ('personalizado', 'Personalizado')], max_length=20)),
                ('horario', models.CharField(max_length=100)),
                ('fecha_inicio', models.DateField()),
                ('fecha_fin', models.DateField()),
                ('aula', models.CharField(max_length=50)),
                ('cupo_maximo', models.PositiveIntegerField()),
                ('cupo_actual', models.PositiveIntegerField(default=0)),
                ('estado', models.CharField(choices=[('planificado', 'Planificado'), ('abierto', 'Inscripciones Abiertas'), ('proceso', 'En Proceso'), ('finalizado', 'Finalizado'), ('cancelado', 'Cancelado')], default='planificado', max_length=20)),
                ('costo', models.DecimalField(decimal_places=2, max_digits=10)),
                ('observaciones', models.TextField(blank=True)),
                ('curso', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='english.curso')),
                ('docente', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='english.docente')),
            ],
            options={
                'ordering': ['-fecha_inicio', 'curso'],
                'unique_together': {('curso', 'codigo')},
            },
        ),
        migrations.CreateModel(
            name='Evento',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('titulo', models.CharField(max_length=200)),
                ('tipo', models.CharField(choices=[('academico', 'Académico'), ('administrativo', 'Administrativo'), ('cultural', 'Cultural'), ('reunion', 'Reunión'), ('capacitacion', 'Capacitación')], max_length=20)),
                ('descripcion', models.TextField()),
                ('fecha_inicio', models.DateTimeField()),
                ('fecha_fin', models.DateTimeField()),
                ('lugar', models.CharField(max_length=100)),
                ('prioridad', models.CharField(choices=[('baja', 'Baja'), ('media', 'Media'), ('alta', 'Alta'), ('urgente', 'Urgente')], default='media', max_length=20)),
                ('recordatorio', models.BooleanField(default=False)),
                ('recordatorio_fecha', models.DateTimeField(blank=True, null=True)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('creado_por', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='eventos_creados', to=settings.AUTH_USER_MODEL)),
                ('participantes', models.ManyToManyField(blank=True, to=settings.AUTH_USER_MODEL)),
                ('grupos', models.ManyToManyField(blank=True, to='english.grupo')),
            ],
            options={
                'verbose_name_plural': 'Eventos',
                'ordering': ['-fecha_inicio'],
            },
        ),
        migrations.AddField(
            model_name='estudiante',
            name='grupo_actual',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='english.grupo'),
        ),
        migrations.CreateModel(
            name='Comunicado',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('titulo', models.CharField(max_length=200)),
                ('contenido', models.TextField()),
                ('fecha_publicacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_expiracion', models.DateField()),
                ('destinatarios', models.CharField(choices=[('estudiantes', 'Estudiantes'), ('docentes', 'Docentes'), ('todos', 'Todos'), ('personalizado', 'Personalizado')], max_length=20)),
                ('prioridad', models.CharField(choices=[('normal', 'Normal'), ('importante', 'Importante'), ('urgente', 'Urgente')], default='normal', max_length=20)),
                ('publicado_por', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='comunicados_publicados', to=settings.AUTH_USER_MODEL)),
                ('usuarios_destino', models.ManyToManyField(blank=True, related_name='comunicados_recibidos', to=settings.AUTH_USER_MODEL)),
                ('grupos_destino', models.ManyToManyField(blank=True, to='english.grupo')),
            ],
            options={
                'verbose_name_plural': 'Comunicados',
                'ordering': ['-fecha_publicacion'],
            },
        ),
        migrations.CreateModel(
            name='Incidencia',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('titulo', models.CharField(max_length=200)),
                ('tipo', models.CharField(choices=[('academica', 'Académica'), ('conducta', 'Conducta'), ('salud', 'Salud'), ('administrativa', 'Administrativa'), ('tecnica', 'Técnica'), ('otra', 'Otra')], max_length=20)),
                ('descripcion', models.TextField()),
                ('fecha_reporte', models.DateTimeField(auto_now_add=True)),
                ('fecha_cierre', models.DateTimeField(blank=True, null=True)),
                ('estado', models.CharField(choices=[('abierta', 'Abierta'), ('en_proceso', 'En Proceso'), ('resuelta', 'Resuelta'), ('cerrada', 'Cerrada')], default='abierta', max_length=20)),
                ('medidas', models.TextField(blank=True, null=True)),
                ('seguimiento', models.TextField(blank=True, null=True)),
                ('docente', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='english.docente')),
                ('estudiante', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='english.estudiante')),
                ('grupo', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='english.grupo')),
                ('reportado_por', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='incidencias_reportadas', to=settings.AUTH_USER_MODEL)),
                ('responsable', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='incidencias_asignadas', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name_plural': 'Incidencias',
                'ordering': ['-fecha_reporte'],
            },
        ),
        migrations.CreateModel(
            name='ItemFactura',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('cantidad', models.PositiveIntegerField(default=1)),
                ('valor_unitario', models.DecimalField(decimal_places=2, max_digits=10)),
                ('descuento', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('iva', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('valor_total', models.DecimalField(decimal_places=2, max_digits=10)),
                ('concepto', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='english.conceptocobro')),
                ('factura', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='english.factura')),
            ],
            options={
                'verbose_name_plural': 'Ítems de Factura',
            },
        ),
        migrations.CreateModel(
            name='ObservacionAcademica',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('fecha', models.DateField()),
                ('tipo', models.CharField(choices=[('academica', 'Académica'), ('comportamiento', 'Comportamiento'), ('recomendacion', 'Recomendación'), ('felicitacion', 'Felicitación')], max_length=20)),
                ('descripcion', models.TextField()),
                ('acciones', models.TextField(blank=True, null=True)),
                ('seguimiento', models.TextField(blank=True, null=True)),
                ('docente', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='english.docente')),
                ('estudiante', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='english.estudiante')),
                ('grupo', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='english.grupo')),
            ],
            options={
                'verbose_name_plural': 'Observaciones Académicas',
                'ordering': ['-fecha', 'estudiante'],
            },
        ),
        migrations.AddField(
            model_name='cobro',
            name='periodo_academico',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='english.periodoacademico'),
        ),
        migrations.CreateModel(
            name='PlantillaReporte',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=100)),
                ('tipo_reporte', models.CharField(choices=[('diario', 'Diario'), ('semanal', 'Semanal'), ('mensual', 'Mensual'), ('trimestral', 'Trimestral'), ('anual', 'Anual'), ('personalizado', 'Personalizado')], max_length=20)),
                ('archivo', models.FileField(upload_to='plantillas_reportes/')),
                ('es_default', models.BooleanField(default=False)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('creado_por', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='plantillas_creadas', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Plantilla de Reporte',
                'verbose_name_plural': 'Plantillas de Reporte',
            },
        ),
        migrations.AddField(
            model_name='estudiante',
            name='programa_actual',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='english.programa'),
        ),
        migrations.CreateModel(
            name='ReporteEconomico',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=200)),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('tipo_reporte', models.CharField(choices=[('diario', 'Diario'), ('semanal', 'Semanal'), ('mensual', 'Mensual'), ('trimestral', 'Trimestral'), ('anual', 'Anual'), ('personalizado', 'Personalizado')], max_length=20)),
                ('tipo_movimiento', models.CharField(choices=[('ingresos', 'Ingresos'), ('egresos', 'Egresos'), ('ambos', 'Ambos')], max_length=20)),
                ('fecha_inicio', models.DateField()),
                ('fecha_fin', models.DateField()),
                ('fecha_generacion', models.DateTimeField(auto_now_add=True)),
                ('archivo', models.FileField(upload_to='reportes_economicos/')),
                ('parametros', models.JSONField(default=dict)),
                ('generado_por', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='reportes_generados', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Reporte Económico',
                'verbose_name_plural': 'Reportes Económicos',
                'ordering': ['-fecha_generacion'],
            },
        ),
        migrations.CreateModel(
            name='ReporteProgramado',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('frecuencia', models.CharField(choices=[('diario', 'Diario'), ('semanal', 'Semanal'), ('mensual', 'Mensual'), ('trimestral', 'Trimestral'), ('anual', 'Anual')], max_length=20)),
                ('proxima_ejecucion', models.DateTimeField()),
                ('ultima_ejecucion', models.DateTimeField(blank=True, null=True)),
                ('activo', models.BooleanField(default=True)),
                ('destinatarios', models.TextField()),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('configuracion', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='english.configuracionreporte')),
                ('creado_por', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='reportes_programados', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Reporte Programado',
                'verbose_name_plural': 'Reportes Programados',
            },
        ),
        migrations.CreateModel(
            name='ResumenEconomico',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('total_ingresos', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('total_egresos', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('balance', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('ingresos_matriculas', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('ingresos_pensiones', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('ingresos_materiales', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('ingresos_certificados', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('ingresos_otros', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('egresos_nomina', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('egresos_arriendos', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('egresos_servicios', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('egresos_materiales', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('egresos_equipos', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('egresos_mantenimiento', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('egresos_otros', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('efectivo_total', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('transferencias_total', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('tarjetas_total', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('billeteras_digitales_total', models.DecimalField(decimal_places=2, default=0, max_digits=15)),
                ('reporte', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='resumen', to='english.reporteeconomico')),
            ],
            options={
                'verbose_name': 'Resumen Económico',
                'verbose_name_plural': 'Resúmenes Económicos',
            },
        ),
        migrations.CreateModel(
            name='SeguimientoIncidencia',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('descripcion', models.TextField()),
                ('fecha', models.DateTimeField(auto_now_add=True)),
                ('incidencia', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='seguimientos', to='english.incidencia')),
                ('usuario', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='seguimientos_incidencias', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name_plural': 'Seguimientos de Incidencias',
                'ordering': ['fecha'],
            },
        ),
        migrations.CreateModel(
            name='Acudiente',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo_identificacion', models.CharField(choices=[('cc', 'Cédula de Ciudadanía'), ('ti', 'Tarjeta de Identidad'), ('ce', 'Cédula de Extranjería'), ('pasaporte', 'Pasaporte')], max_length=20)),
                ('identificacion', models.CharField(max_length=20)),
                ('nombre_completo', models.CharField(max_length=200)),
                ('parentesco', models.CharField(choices=[('padre', 'Padre'), ('madre', 'Madre'), ('abuelo', 'Abuelo/a'), ('tio', 'Tío/a'), ('hermano', 'Hermano/a'), ('tutor', 'Tutor Legal'), ('otro', 'Otro')], max_length=50)),
                ('direccion', models.TextField(blank=True, null=True)),
                ('telefono', models.CharField(max_length=20)),
                ('telefono_alterno', models.CharField(blank=True, max_length=20, null=True)),
                ('correo', models.EmailField(blank=True, max_length=254, null=True)),
                ('ocupacion', models.CharField(blank=True, max_length=100, null=True)),
                ('responsable_pago', models.BooleanField(default=False)),
                ('responsable_academico', models.BooleanField(default=False)),
                ('emergencia', models.BooleanField(default=False)),
                ('estudiante', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='acudientes', to='english.estudiante')),
            ],
            options={
                'verbose_name_plural': 'Acudientes',
                'unique_together': {('estudiante', 'identificacion')},
            },
        ),
        migrations.CreateModel(
            name='Asistencia',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('fecha', models.DateField()),
                ('hora_llegada', models.TimeField(blank=True, null=True)),
                ('estado', models.CharField(choices=[('asistio', 'Asistió'), ('falto', 'Faltó'), ('tardanza', 'Llegó tarde'), ('justificado', 'Justificado')], max_length=20)),
                ('observaciones', models.TextField(blank=True, null=True)),
                ('registrado_por', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='asistencias_registradas', to=settings.AUTH_USER_MODEL)),
                ('estudiante', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='english.estudiante')),
                ('grupo', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='english.grupo')),
            ],
            options={
                'verbose_name_plural': 'Asistencias',
                'ordering': ['-fecha', 'estudiante'],
                'unique_together': {('estudiante', 'grupo', 'fecha')},
            },
        ),
        migrations.CreateModel(
            name='Calificacion',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nota1', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('nota2', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('nota3', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('nota_final', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('observaciones', models.TextField(blank=True, null=True)),
                ('curso', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='english.curso')),
                ('docente', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='english.docente')),
                ('estudiante', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='english.estudiante')),
                ('grupo', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='english.grupo')),
                ('periodo', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='english.periodoacademico')),
            ],
            options={
                'verbose_name_plural': 'Calificaciones',
                'ordering': ['periodo', 'curso', 'estudiante'],
                'unique_together': {('estudiante', 'curso', 'grupo', 'periodo')},
            },
        ),
        migrations.CreateModel(
            name='Matricula',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('consecutivo', models.CharField(editable=False, max_length=20, unique=True)),
                ('fecha_matricula', models.DateField()),
                ('fecha_fin', models.DateField()),
                ('estado', models.CharField(choices=[('activa', 'Activa'), ('retirada', 'Retirada'), ('finalizada', 'Finalizada'), ('suspendida', 'Suspendida')], default='activa', max_length=20)),
                ('observaciones', models.TextField(blank=True, null=True)),
                ('creada_por', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='matriculas_creadas', to=settings.AUTH_USER_MODEL)),
                ('estudiante', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='english.estudiante')),
                ('grupo', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='english.grupo')),
                ('periodo', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='english.periodoacademico')),
                ('programa', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='english.programa')),
            ],
            options={
                'verbose_name_plural': 'Matrículas',
                'ordering': ['-fecha_matricula'],
                'unique_together': {('estudiante', 'periodo', 'programa')},
            },
        ),
    ]
